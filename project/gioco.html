<!DOCTYPE html>
<html lang="it">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>La Quête di Eldoria</title>
<style>
  body {
    background: #f9f9f9;
    color: #222;
    font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen,
      Ubuntu, Cantarell, "Open Sans", "Helvetica Neue", sans-serif;
    margin: 0;
    padding: 1.5rem;
    line-height: 1.5;
    max-width: 720px;
    margin-left: auto;
    margin-right: auto;
  }
  h1, h2 {
    color: #004d40;
    font-weight: 700;
  }
  button {
    background: #00796b;
    border: none;
    color: white;
    padding: 0.6rem 1.2rem;
    margin: 0.4rem 0.3rem 0.4rem 0;
    font-size: 1rem;
    border-radius: 4px;
    cursor: pointer;
    transition: background-color 0.2s ease;
  }
  button:hover, button:focus {
    background: #004d40;
    outline: none;
  }
  #story {
    margin-bottom: 1.5rem;
    white-space: pre-line;
  }
  .choices {
    margin-top: 1rem;
  }
  footer {
    margin-top: 3rem;
    font-size: 0.9rem;
    color: #666;
    text-align: center;
  }
</style>
</head>
<body>
<h1>La Quête di Eldoria</h1>
<div id="story"></div>
<div class="choices" id="choices"></div>
<footer>© Regno di Eldoria - Avventura Interattiva</footer>
<script>
(() => {
  // Sections data keyed by section id
  const sections = {
    start: {
      title: "Riassunto della storia",
      text: `Il Regno di Eldoria è sull'orlo del collasso dopo il furto del Cristallo di Luce. Tu, l'eroe prescelto, devi recuperarlo viaggiando attraverso la Foresta Sussurrante, trovando il nascosto Tempio degli Echi e sconfiggendo il Guardiano Oscuro.

Sei nel villaggio di Dawnmere, pronto a iniziare la tua missione per salvare il regno.`,
      choices: [
        { text: "Inizia l'avventura", next: "1" }
      ]
    },
    "1": {
      text: `Il sole sorge sul tranquillo villaggio di Dawnmere, dove tu, l'eroe prescelto, ti trovi al limite della tua casa. La notizia si è diffusa rapidamente: il Cristallo di Luce, protettore di Eldoria, è stato rubato. Senza di esso, il destino del regno è segnato. La tua missione è chiara: recuperare il Cristallo avventurandoti nella misteriosa Foresta Sussurrante, trovare il nascosto Tempio degli Echi e sconfiggere il Guardiano Oscuro che ora domina lì.

Gli abitanti del villaggio si radunano intorno a te, con gli occhi pieni di speranza. "Per favore, coraggioso," dice l'anziano del villaggio, "la foresta è insidiosa. Solo i degni possono ottenere la chiave magica dallo spirito della foresta. Senza di essa, le porte del tempio rimangono sigillate." Ti prepari, consapevole che il viaggio sarà pericoloso ma necessario.`,
      choices: [
        { text: "Raccogli informazioni dall'anziano sullo spirito della foresta", next: "2" },
        { text: "Prepara le provviste e parti subito verso la Foresta Sussurrante", next: "3" },
        { text: "Cerca il cacciatore del villaggio per una guida nella foresta", next: "4" },
        { text: "Parla con gli abitanti per sentire voci sul Tempio degli Echi", next: "5" }
      ]
    },
    "2": {
      text: `L'anziano condivide antiche saggezze. "La Foresta Sussurrante è viva di segreti. Lo spirito della foresta mette alla prova chi cerca la chiave, non con la forza, ma con la dignità. Mostra gentilezza, coraggio e saggezza. L'aiuto dello spirito non è dato a cuor leggero." Assorbi il consiglio dell'anziano, sentendo un misto di apprensione e determinazione.`,
      choices: [
        { text: "Prepara le provviste e parti verso la Foresta Sussurrante", next: "3" },
        { text: "Cerca il cacciatore del villaggio per una guida nella foresta", next: "4" },
        { text: "Parla con gli abitanti per sentire voci sul Tempio degli Echi", next: "5" }
      ]
    },
    "3": {
      text: `Prepari la bisaccia con cibo, acqua e un mantello robusto. Armato e pronto, metti piede sul sentiero ombroso che conduce nella Foresta Sussurrante. Gli alberi sembrano mormorare mentre passi, le loro voci tessono un arazzo di antica magia e cautela. La fitta chioma oscura la luce del giorno, e ogni passo avanti approfondisce il mistero.`,
      choices: [
        { text: "Cerca la radura dello spirito della foresta per chiedere la chiave magica", next: "6" },
        { text: "Esplora più a fondo la foresta per trovare indizi sullo spirito", next: "7" },
        { text: "Segui le tracce degli animali che potrebbero condurre allo spirito", next: "8" },
        { text: "Riposa brevemente per recuperare le forze", next: "9" }
      ]
    },
    "4": {
      text: `Il cacciatore del villaggio, un uomo rugoso con occhi acuti come falchi, annuisce solennemente. "La foresta non è luogo per fretta. Segui il fiume a monte; lo spirito dimora vicino alla sua sorgente. Ma attento alle illusioni che crea. Solo i degni superano le sue prove." Il suo consiglio è come una corda di salvataggio nell'oscuro ignoto.`,
      choices: [
        { text: "Prepara le provviste e parti verso la Foresta Sussurrante", next: "3" },
        { text: "Parla con gli abitanti per sentire voci sul Tempio degli Echi", next: "5" },
        { text: "Raccogli altre informazioni dall'anziano del villaggio", next: "2" }
      ]
    },
    "5": {
      text: `Sussurri tra gli abitanti parlano del Tempio degli Echi nascosto nel profondo della foresta. "Le sue mura cantano di eroi passati," dice un contadino, "ma nessuno è entrato senza la chiave magica." Le storie accendono la tua determinazione, ma ricordano anche le sfide che ti attendono.`,
      choices: [
        { text: "Prepara le provviste e parti verso la Foresta Sussurrante", next: "3" },
        { text: "Cerca la guida del cacciatore del villaggio", next: "4" },
        { text: "Raccogli informazioni dall'anziano del villaggio", next: "2" }
      ]
    },
    "6": {
      text: `Ti trovi in una radura illuminata da una luce eterea dove l'aria vibra di magia. Lo spirito della foresta appare, una figura scintillante intrecciata di foglie e luce. Ti osserva in silenzio. "Dimostra il tuo valore," intona, "attraverso una prova di cuore, mente o coraggio."`,
      choices: [
        { text: "Accetta la prova del cuore (aiuta una creatura ferita vicina)", next: "10" },
        { text: "Accetta la prova della mente (risolvi l'enigma dello spirito)", next: "11" },
        { text: "Accetta la prova del coraggio (entra nella caverna oscura da solo)", next: "12" },
        { text: "Chiedi cortesemente più tempo per prepararti", next: "9" }
      ]
    },
    "7": {
      text: `Procedi con cautela, notando antiche incisioni sulla corteccia degli alberi e deboli sentieri di muschio luminoso. La foresta sussurra segreti, ma anche avvertimenti. Improvvisamente, una voce soffusa chiama il tuo nome—un invito o una trappola?`,
      choices: [
        { text: "Segui la voce con cautela", next: "6" },
        { text: "Ignora la voce e continua a esplorare", next: "13" },
        { text: "Torna al limite della foresta per riposare e riflettere", next: "9" }
      ]
    },
    "8": {
      text: `Le tracce ti conducono a un ruscello scintillante dove lo spirito della foresta appare spesso. Mentre aspetti, lo spirito si materializza, il suo sguardo penetrante ma curioso. Questo incontro è la tua occasione per guadagnare la chiave.`,
      choices: [
        { text: "Avvicinati e chiedi la chiave magica", next: "6" },
        { text: "Osserva in silenzio per imparare di più sullo spirito", next: "7" },
        { text: "Ritirati per riposare e pianificare", next: "9" }
      ]
    },
    "9": {
      text: `Trovi un luogo sicuro sotto antichi querce e riposi, lasciando che la calma della foresta penetri nelle tue ossa. Le tue forze ritornano e la mente si schiarisce. Il viaggio è lungo, ma la preparazione è fondamentale.`,
      choices: [
        { text: "Cerca la radura dello spirito della foresta", next: "6" },
        { text: "Esplora più a fondo la foresta", next: "7" },
        { text: "Segui le tracce degli animali", next: "8" }
      ]
    },
    "10": {
      text: `Una piccola creatura zoppica in vista, la zampa intrappolata in un rovo. La liberi delicatamente, curando la sua ferita con attenzione. Lo spirito della foresta osserva, un sorriso nei suoi occhi. "La compassione rivela il vero valore," dice, consegnandoti una chiave luminosa. "Il tempio ti attende."`,
      choices: [
        { text: "Procedi verso il Tempio degli Echi", next: "14" }
      ]
    },
    "11": {
      text: `Lo spirito presenta un enigma: "Parlo senza bocca e sento senza orecchie. Non ho corpo, ma prendo vita col vento. Cosa sono?" Pensi attentamente.

Risposta corretta: "Eco"

Lo spirito annuisce approvando. "La saggezza serve bene i degni." Ti concede la chiave magica, scintillante di potere.`,
      choices: [
        { text: "Procedi verso il Tempio degli Echi", next: "14" }
      ]
    },
    "12": {
      text: `Entri nella caverna oscura, l'oscurità ti inghiotte. I suoni riecheggiano stranamente, occhi invisibili sembrano osservarti. Radunando il coraggio, avanzi. Al cuore della caverna, una chiave luminosa riposa su un piedistallo di pietra. La afferri saldamente mentre la caverna si illumina.`,
      choices: [
        { text: "Procedi verso il Tempio degli Echi", next: "14" }
      ]
    },
    "13": {
      text: `Ignorando il richiamo tentatore, prosegui. La foresta si fa più fitta e inciampi in un cespuglio di spine velenose. Ferito, ti ritiri in salvo, rendendoti conto che la foresta mette alla prova anche la pazienza.`,
      choices: [
        { text: "Riposa per recuperare", next: "9" },
        { text: "Prova a trovare la radura dello spirito nonostante la ferita", next: "6" }
      ]
    },
    "14": {
      text: `Davanti a te si erge l'antico Tempio degli Echi, le sue grandi porte sigillate ma ora sbloccate dal bagliore della chiave magica. L'aria trema di magia oscura; sai che il Guardiano Oscuro ti aspetta dentro. Lo scontro finale è vicino.`,
      choices: [
        { text: "Entra nel tempio e affronta il Guardiano Oscuro", next: "15" },
        { text: "Perlustra il perimetro del tempio alla ricerca di un ingresso segreto", next: "16" },
        { text: "Chiama il Guardiano Oscuro per negoziare", next: "17" },
        { text: "Riposa per prepararti alla battaglia", next: "18" }
      ]
    },
    "15": {
      text: `Dentro il tempio oscuro, le ombre si raccolgono nel Guardiano Oscuro, una figura imponente con armatura nera e occhi ardenti di malvagità. "Osi sfidarmi?" ringhia. L'acciaio si scontra mentre la battaglia inizia, la tua determinazione messa alla prova fino al limite.`,
      choices: [
        { text: "Usa il potere della chiave magica per indebolire il Guardiano", next: "19" },
        { text: "Combatti direttamente contro il Guardiano", next: "20" },
        { text: "Schiva e cerca il Cristallo di Luce nel tempio", next: "21" }
      ]
    },
    "16": {
      text: `Girando intorno al tempio, scopri un ingresso stretto coperto di viti e parzialmente nascosto dalle ombre. Potrebbe permetterti di evitare il Guardiano Oscuro o coglierlo di sorpresa.`,
      choices: [
        { text: "Entra furtivamente dall'ingresso segreto", next: "21" },
        { text: "Torna alle porte principali e affronta il Guardiano", next: "15" },
        { text: "Aspetta e osserva i movimenti del Guardiano", next: "18" }
      ]
    },
    "17": {
      text: `Chiami il Guardiano Oscuro, offrendo termini per evitare il conflitto. Il Guardiano ride diabolico. "Il Cristallo è mio. Vai via o sarai distrutto." La sua sfida ti riempie di terrore, ma anche di ferma determinazione.`,
      choices: [
        { text: "Entra nel tempio per combattere", next: "15" },
        { text: "Perlustra il perimetro alla ricerca di un ingresso segreto", next: "16" },
        { text: "Riposa e ripensa la strategia", next: "18" }
      ]
    },
    "18": {
      text: `Trovi un angolo tranquillo vicino al tempio per riposare. Il cuore batte forte, ma lo spirito si calma. La battaglia finale ti attende, e la preparazione potrebbe fare la differenza.`,
      choices: [
        { text: "Entra nel tempio e affronta il Guardiano Oscuro", next: "15" },
        { text: "Perlustra il perimetro alla ricerca di un ingresso segreto", next: "16" }
      ]
    },
    "19": {
      text: `Canalizzi la luce della chiave magica, raggi di pura energia colpiscono il Guardiano Oscuro. Barcolla, la sua armatura scura si incrina. "No... non può essere!" ruggisce, vulnerabile.`,
      choices: [
        { text: "Lancia un attacco decisivo", next: "22" },
        { text: "Approfitta del vantaggio e disarma il Guardiano", next: "23" },
        { text: "Difenditi cautamente e aspetta un'apertura", next: "20" }
      ]
    },
    "20": {
      text: `Acciaio contro acciaio mentre ti scontri con il Guardiano Oscuro. La sua forza è immensa, ma la tua volontà incrollabile. Ogni colpo ti avvicina alla vittoria o alla sconfitta.`,
      choices: [
        { text: "Prova a disarmare il Guardiano", next: "23" },
        { text: "Usa la chiave magica per indebolirlo", next: "19" },
        { text: "Schiva e cerca il Cristallo di Luce", next: "21" }
      ]
    },
    "21": {
      text: `Schivando gli attacchi, scorgi il Cristallo di Luce, che brilla su un altare. Raggiungerlo potrebbe cambiare le sorti, ma il Guardiano Oscuro blocca il tuo cammino con ferocia.`,
      choices: [
        { text: "Corri a prendere il Cristallo", next: "24" },
        { text: "Distrai il Guardiano per creare un'opportunità", next: "22" },
        { text: "Usa il potere della chiave magica per aprirti un varco", next: "19" }
      ]
    },
    "22": {
      text: `Cogliendo il momento, colpisci con precisione. Il Guardiano vacilla, le sue difese crollano. L'altare con il Cristallo è a portata di mano.`,
      choices: [
        { text: "Prendi il Cristallo di Luce", next: "24" },
        { text: "Finisci prima il Guardiano", next: "23" }
      ]
    },
    "23": {
      text: `Con un ultimo, potente colpo, disarmi il Guardiano. Cade, sconfitto. Il tempio si fa silenzioso e il Cristallo brilla invitante.`,
      choices: [
        { text: "Prendi possesso del Cristallo di Luce", next: "25" }
      ]
    },
    "24": {
      text: `Afferri il Cristallo di Luce dall'altare. La sua energia radiante ti pervade, riempiendoti di speranza e forza. La presa del Guardiano si indebolisce e cade sconfitto ai tuoi piedi.`,
      choices: [
        { text: "Celebra la vittoria ed esci dal tempio", next: "25" }
      ]
    },
    "25": {
      text: `Con il Cristallo di Luce in tuo possesso e il Guardiano Oscuro sconfitto, le ombre del tempio si dissolvono. Il destino di Eldoria cambia dalla disperazione alla speranza. Entri nella luce del sole, finalmente salvatore del regno.`,
      choices: [
        { text: "Gioca di nuovo", next: "start" }
      ]
    }
  };

  // Current section id
  let currentSection = "start";

  // DOM elements
  const storyEl = document.getElementById("story");
  const choicesEl = document.getElementById("choices");

  // Render function
  function renderSection(id) {
    currentSection = id;
    const section = sections[id];
    if (!section) {
      storyEl.textContent = "Errore: sezione non trovata.";
      choicesEl.innerHTML = "";
      return;
    }
    // Title for start only
    if (section.title) {
      storyEl.innerHTML = `<h2>${section.title}</h2><p>${section.text}</p>`;
    } else {
      storyEl.innerHTML = `<p>${section.text}</p>`;
    }
    // Clear previous choices
    choicesEl.innerHTML = "";
    // Add buttons for choices
    if (section.choices && section.choices.length > 0) {
      section.choices.forEach(choice => {
        const btn = document.createElement("button");
        btn.textContent = choice.text;
        btn.onclick = () => renderSection(choice.next);
        choicesEl.appendChild(btn);
      });
    }
  }

  // Initialize game
  renderSection(currentSection);
})();
</script>
</body>
</html>